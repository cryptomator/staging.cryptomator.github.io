"use strict";class DesktopLicense{constructor(e,t){this._form=e,this._checkoutData=t,this._paddle=$.ajax({url:"https://cdn.paddle.com/paddle/v2/paddle.js",cache:!0,dataType:"script"}).then(()=>(PADDLE_ENABLE_SANDBOX&&window.Paddle.Environment.set("sandbox"),window.Paddle.Initialize({token:PADDLE_TOKEN,eventCallback:e=>{e.name=="checkout.completed"?this.onCheckoutSucceeded():e.name=="checkout.closed"&&(this._checkoutData.inProgress=!1)}}),window.Paddle))}loadPrice(){this._paddle.then(e=>{let t={items:PADDLE_DESKTOP_PRICE_IDS.map(e=>({priceId:e,quantity:1}))};e.PricePreview(t).then(e=>{this._checkoutData.prices=e.data.details.lineItems.map(t=>({priceId:t.price.id,currencyCode:e.data.currencyCode,amount:t.totals.total,formattedAmount:t.formattedTotals.total}))}).catch(()=>{this._checkoutData.errorMessage="Retrieving prices failed. Please try again later."})})}checkout(e,t){if(!$(this._form)[0].checkValidity()){$(this._form).find(":input").addClass("show-invalid"),this._checkoutData.errorMessage="Please fill in all required fields.";return}this._checkoutData.inProgress=!0,this._checkoutData.errorMessage="",this._checkoutData.success=!1,this._paddle.then(n=>{n.Checkout.open({settings:{locale:t},items:[{priceId:e,quantity:this._checkoutData.quantity}],customer:{email:this._checkoutData.email}})})}onCheckoutSucceeded(){this._checkoutData.success=!0,this._checkoutData.errorMessage="",this._checkoutData.inProgress=!1}}